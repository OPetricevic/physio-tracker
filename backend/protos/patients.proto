syntax = "proto3";

package patients.v1;

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/OPetricevic/physio-tracker/backend/golang/patients;patients";

// Patient represents a person under care.
message Patient {
  string uuid = 1; // required
  string doctor_uuid = 2; // required
  string first_name = 3; // required
  string last_name = 4; // required
  google.protobuf.StringValue phone = 5;
  google.protobuf.StringValue address = 6;
  google.protobuf.StringValue date_of_birth = 7;
  google.protobuf.StringValue sex = 8;
  google.protobuf.Timestamp created_at = 9; // set by service
  google.protobuf.Timestamp updated_at = 10; // nullable
}

message CreatePatientRequest {
  string doctor_uuid = 1;
  string first_name = 2;
  string last_name = 3;
  google.protobuf.StringValue phone = 4;
  google.protobuf.StringValue address = 5;
  google.protobuf.StringValue date_of_birth = 6;
  google.protobuf.StringValue sex = 7;
}

message PatientResponse {
  Patient patient = 1;
}

message ListPatientsRequest {
  string query = 1;
}

message ListPatientsResponse {
  repeated Patient patients = 1;
}

message UpdatePatientRequest {
  string uuid = 1;
  string doctor_uuid = 2;
  string first_name = 3;
  string last_name = 4;
  google.protobuf.StringValue phone = 5;
  google.protobuf.StringValue address = 6;
  google.protobuf.StringValue date_of_birth = 7;
  google.protobuf.StringValue sex = 8;
}

message DeletePatientRequest {
  string uuid = 1;
}

service PatientsService {
  rpc CreatePatient(CreatePatientRequest) returns (PatientResponse);
  rpc UpdatePatient(UpdatePatientRequest) returns (PatientResponse);
  rpc DeletePatient(DeletePatientRequest) returns (PatientResponse);
  rpc ListPatients(ListPatientsRequest) returns (ListPatientsResponse);
}
